GET https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json
Accept: application/json
Authorization: (removed)
Connection: keep-alive

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig",
  "updateTime": "2024-04-01T12:34:56.123456Z"
}

---

PATCH https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json&updateMask=cryptoKeyName
Accept: application/json
Authorization: (removed)
Connection: keep-alive
Content-Type: application/json

{
  "cryptoKeyName": "projects/test-project-${uniqueId}/locations/us-central1/keyRings/test-ring-${uniqueId}/cryptoKeys/test-key-${uniqueId}",
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig"
}

500 Internal Server Error
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 500,
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "An internal error has occurred (19acd577-aa89-4d84-8e0a-a961a756d003)",
        "stackEntries": [
          "cloud/control2/shared/userfriendly/userfriendly.go:1165 +0x25 google3/cloud/control2/shared/userfriendly/userfriendly.DebugInfoWithMessage({0xc1bd8fb180, 0x45})",
          "cloud/control2/shared/userfriendly/userfriendly.go:449 +0x6d google3/cloud/control2/shared/userfriendly/userfriendly.internalErrorWithStatus({0x55ec5e976a88, 0xc0bed7b5f0}, {0x55ec517e49f5, 0xd}, 0x0, {0xc1bd8fb180, 0x45}, 0xc0e4896c00, 0x0)",
          "cloud/control2/shared/userfriendly/userfriendly.go:1042 +0x13d google3/cloud/control2/shared/userfriendly/userfriendly.FromExternalUserFriendlyStatus({0x55ec5e976a88, 0xc0bed7b5f0}, {0x55ec517e49f5, 0xd}, 0xc156e71900, 0x0, 0x0)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:192 +0x614 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.callBackendMethod({0x55ec5dac0980?}, {0x55ec5e976a88, 0xc0bed7b5f0}, {0xc1c22d1380, 0xb}, 0x65fd9d83e8, {0x55ec5e966e28, 0xc10e6a90e0}, {0x55ec5e81a9f8, 0xc140ace580}, ...)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:56 +0x78 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.CallPreprocess({0xc042b705f0?}, {0x55ec5e976a88, 0xc0bed7b5f0}, 0x0, {0xc1c22d1380?, 0xc001b8ee00?}, 0xc10e6a8ff0?, 0x55ec5e821960?, {0x55ec5e81a9f8, 0xc140ace580}, ...)",
          "cloud/control2/frontend/handler/mutate.go:508 +0x2fe5 google3/cloud/control2/frontend/handler/handler.Handler.handleResourceMutation({{{0x55ec5e9808f0, 0xc004e74340}, {0x0, 0x0}}, {{0xc0077a7430, 0x1, 0x1}, 0xc007ea0600, 0xc0077a7420, {0x55ec5e992d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:375 +0xbbb google3/cloud/control2/frontend/handler/handler.Handler.start({{{0x55ec5e9808f0, 0xc004e74340}, {0x0, 0x0}}, {{0xc0077a7430, 0x1, 0x1}, 0xc007ea0600, 0xc0077a7420, {0x55ec5e992d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:276 +0x66 google3/cloud/control2/frontend/handler/handler.init.func17({_, _}, {{{0x55ec5e9808f0, 0xc004e74340}, {0x0, 0x0}}, {{0xc0077a7430, 0x1, 0x1}, 0xc007ea0600, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:271 +0x173 google3/cloud/control2/frontend/handler/handler.Handler.HandleRequest({{{0x55ec5e9808f0, 0xc004e74340}, {0x0, 0x0}}, {{0xc0077a7430, 0x1, 0x1}, 0xc007ea0600, 0xc0077a7420, {0x55ec5e992d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/server/request_handler.go:111 +0x55c google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequestWithFullMethodName(0xc00de48120, {0x55ec5e976a88, 0xc0bed7b380}, 0xc17f765440, 0xc118f98c00, 0xc057675dd0, {0xc1c5d288c0?, 0x55ec546c73e7?})",
          "cloud/control2/frontend/server/request_handler.go:84 +0x536 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequest(0xc00de48120, {0x55ec5e976a88, 0xc0bed7b380}, 0xc118f98c00, 0xc057675dd0)",
          "cloud/control2/frontend/server/request_handler.go:53 +0x25 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handle(0xc042b71308?, {0x55ec5e976a88, 0xc0bed7b380}, 0x55ec5c6140c0?, 0xc05f95d101?)",
          "cloud/control2/shared/genericrpc/service.go:172 +0x3e8 google3/cloud/control2/shared/genericrpc/genericrpc.(*Dispatcher).DefaultMethodHandler(0xc007991530, {0x55ec5e976a88, 0xc0bed7b380}, 0xc118f98c00)",
          "net/rpc/go/stream.go:1167 +0x43 google3/net/rpc/go/rpc.runStreamHandler({0x55ec5e976a88?, 0xc0bed7b380?}, 0xc118f98c00?, {0x0?, 0x0?}, {0x55ec5e98c120, 0xc10e6a8eb0})",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x55ec5e976a88?, 0xc0df58e090?}, 0xc042b718d0)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc045f0bb40, {0x55ec5e977098, 0xc0e3dc5b00}, 0xc0f6392080)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "failed to extract key project ID from key name, error: generic::not_found: Resource projects/test-project-${uniqueId} could not be found.",
        "stackEntries": [
          "cloud/saas_accelerator/public/apierrors.go:722 +0x25 google3/cloud/saas_accelerator/public/apierrors.debugInfoWithMessage({0xc01a4e6870, 0x8e})",
          "cloud/saas_accelerator/public/apierrors.go:600 +0x197 google3/cloud/saas_accelerator/public/apierrors.Internal({0x557edc7b6b90, 0xc0239579b0}, {0x557edc7264e8, 0xc022264b80}, {0x557ed385ebda, 0x2e}, {0x0, 0x0, 0x0})",
          "cloud/eventflow/controlplane/clh/v1/handler_util.go:71 +0x105 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).CheckCmekC4OrgPolicy(0xc00fb26410, {0x557edc7b6b90, 0xc0239579b0}, {0xc01a04c470, 0xc}, {0xc01a4e6750?, 0xc005f0c388?})",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:245 +0x205 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).prepareUpdateGoogleChannelConfigSingleton(0xc00fb26410, {0x557edc7b6b90, 0xc0239579b0}, 0xc011f63000, 0xc011f63840)",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:225 +0x2f google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).PrepareUpdateGoogleChannelConfigSingleton(0xc00de5f200?, {0x557edc7b6b90, 0xc0239579b0}, 0xc011f63000, 0xc005f0c460?)",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x557edc7b6b90?, 0xc0239577d0?}, 0xc005f0d588)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc01dd128c0, {0x557edc7b7148, 0xc01bf60480}, 0xc0198b0280)",
          "production/fireaxe/go/filters/rpcserverinterceptor.go:62 +0x2f0 google3/production/fireaxe/go/filters/rpcserverinterceptor.(*Interceptor).MakeHook-fm.(*Interceptor).MakeHook.func2({0x557edc7b7148, 0xc01bf60480}, 0xc0198b0280)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.ResourceInfo]:{resource_name:\"projects/test-project-${uniqueId}\"}"
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.RequestInfo]:{request_id:\"d8af0ad9364026cd\"}"
      }
    ],
    "message": "An internal error has occurred (3c462a78-8320-44e1-8d90-4db8d42396b3)",
    "status": "INTERNAL"
  }
}

---

PATCH https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json&updateMask=cryptoKeyName
Accept: application/json
Authorization: (removed)
Connection: keep-alive
Content-Type: application/json

{
  "cryptoKeyName": "projects/test-project-${uniqueId}/locations/us-central1/keyRings/test-ring-${uniqueId}/cryptoKeys/test-key-${uniqueId}",
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig"
}

500 Internal Server Error
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 500,
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "An internal error has occurred (9b0748ed-cb2b-4ae7-8092-0246e03dc33f)",
        "stackEntries": [
          "cloud/control2/shared/userfriendly/userfriendly.go:1165 +0x25 google3/cloud/control2/shared/userfriendly/userfriendly.DebugInfoWithMessage({0xc14a94b360, 0x45})",
          "cloud/control2/shared/userfriendly/userfriendly.go:449 +0x6d google3/cloud/control2/shared/userfriendly/userfriendly.internalErrorWithStatus({0x55d6a4376a88, 0xc13d12f440}, {0x55d6971e49f5, 0xd}, 0x0, {0xc14a94b360, 0x45}, 0xc1620d07e0, 0x0)",
          "cloud/control2/shared/userfriendly/userfriendly.go:1042 +0x13d google3/cloud/control2/shared/userfriendly/userfriendly.FromExternalUserFriendlyStatus({0x55d6a4376a88, 0xc13d12f440}, {0x55d6971e49f5, 0xd}, 0xc167d9fd80, 0x0, 0x0)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:192 +0x614 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.callBackendMethod({0x55d6a34c0980?}, {0x55d6a4376a88, 0xc13d12f440}, {0xc15ca82800, 0xb}, 0x65fd9d83e8, {0x55d6a4366e28, 0xc17022ea00}, {0x55d6a421a9f8, 0xc17b5fb6c0}, ...)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:56 +0x78 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.CallPreprocess({0xc0830865f0?}, {0x55d6a4376a88, 0xc13d12f440}, 0x0, {0xc15ca82800?, 0xc0067d2380?}, 0xc17022e8c0?, 0x55d6a4221960?, {0x55d6a421a9f8, 0xc17b5fb6c0}, ...)",
          "cloud/control2/frontend/handler/mutate.go:508 +0x2fe5 google3/cloud/control2/frontend/handler/handler.Handler.handleResourceMutation({{{0x55d6a43808f0, 0xc004c797c0}, {0x0, 0x0}}, {{0xc0068009d0, 0x1, 0x1}, 0xc0085d50f8, 0xc0068009c0, {0x55d6a4392d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:375 +0xbbb google3/cloud/control2/frontend/handler/handler.Handler.start({{{0x55d6a43808f0, 0xc004c797c0}, {0x0, 0x0}}, {{0xc0068009d0, 0x1, 0x1}, 0xc0085d50f8, 0xc0068009c0, {0x55d6a4392d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:276 +0x66 google3/cloud/control2/frontend/handler/handler.init.func17({_, _}, {{{0x55d6a43808f0, 0xc004c797c0}, {0x0, 0x0}}, {{0xc0068009d0, 0x1, 0x1}, 0xc0085d50f8, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:271 +0x173 google3/cloud/control2/frontend/handler/handler.Handler.HandleRequest({{{0x55d6a43808f0, 0xc004c797c0}, {0x0, 0x0}}, {{0xc0068009d0, 0x1, 0x1}, 0xc0085d50f8, 0xc0068009c0, {0x55d6a4392d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/server/request_handler.go:111 +0x55c google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequestWithFullMethodName(0xc00b57e5a0, {0x55d6a4376a88, 0xc13d12f1d0}, 0xc17b5fb0c0, 0xc1100b16c8, 0xc1100b1ab8, {0xc0b8302910?, 0x55d69a0c73e7?})",
          "cloud/control2/frontend/server/request_handler.go:84 +0x536 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequest(0xc00b57e5a0, {0x55d6a4376a88, 0xc13d12f1d0}, 0xc1100b16c8, 0xc1100b1ab8)",
          "cloud/control2/frontend/server/request_handler.go:53 +0x25 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handle(0xc0a5269308?, {0x55d6a4376a88, 0xc13d12f1d0}, 0x55d6a20140c0?, 0xc0760a5501?)",
          "cloud/control2/shared/genericrpc/service.go:172 +0x3e8 google3/cloud/control2/shared/genericrpc/genericrpc.(*Dispatcher).DefaultMethodHandler(0xc006f8d4d0, {0x55d6a4376a88, 0xc13d12f1d0}, 0xc1100b16c8)",
          "net/rpc/go/stream.go:1167 +0x43 google3/net/rpc/go/rpc.runStreamHandler({0x55d6a4376a88?, 0xc13d12f1d0?}, 0xc1100b16c8?, {0x0?, 0x0?}, {0x55d6a438c120, 0xc17022e820})",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x55d6a4376a88?, 0xc1614ac4b0?}, 0xc0830878d0)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc0fd55b000, {0x55d6a4377098, 0xc0cf7af260}, 0xc0e1bdb080)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "failed to extract key project ID from key name, error: generic::not_found: Resource projects/test-project-${uniqueId} could not be found.",
        "stackEntries": [
          "cloud/saas_accelerator/public/apierrors.go:722 +0x25 google3/cloud/saas_accelerator/public/apierrors.debugInfoWithMessage({0xc00ad543f0, 0x8e})",
          "cloud/saas_accelerator/public/apierrors.go:600 +0x197 google3/cloud/saas_accelerator/public/apierrors.Internal({0x557edc7b6b90, 0xc0251b6000}, {0x557edc7264e8, 0xc022185b80}, {0x557ed385ebda, 0x2e}, {0x0, 0x0, 0x0})",
          "cloud/eventflow/controlplane/clh/v1/handler_util.go:71 +0x105 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).CheckCmekC4OrgPolicy(0xc00fb26410, {0x557edc7b6b90, 0xc0251b6000}, {0xc01ef35ca0, 0xc}, {0xc002adec60?, 0x5?})",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:245 +0x205 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).prepareUpdateGoogleChannelConfigSingleton(0xc00fb26410, {0x557edc7b6b90, 0xc0251b6000}, 0xc002f77500, 0xc022184940)",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:225 +0x2f google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).PrepareUpdateGoogleChannelConfigSingleton(0x2?, {0x557edc7b6b90, 0xc0251b6000}, 0xc002f77500, 0x0?)",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x557edc7b6b90?, 0xc020ce3d10?}, 0xc00d613588)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc01dd128c0, {0x557edc7b7148, 0xc006517bc0}, 0xc015d13080)",
          "production/fireaxe/go/filters/rpcserverinterceptor.go:62 +0x2f0 google3/production/fireaxe/go/filters/rpcserverinterceptor.(*Interceptor).MakeHook-fm.(*Interceptor).MakeHook.func2({0x557edc7b7148, 0xc006517bc0}, 0xc015d13080)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.ResourceInfo]:{resource_name:\"projects/test-project-${uniqueId}\"}"
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.RequestInfo]:{request_id:\"8095f4e95f1059bf\"}"
      }
    ],
    "message": "An internal error has occurred (e7e44883-5c19-4456-90b9-e669e230c1ab)",
    "status": "INTERNAL"
  }
}

---

PATCH https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json&updateMask=cryptoKeyName
Accept: application/json
Authorization: (removed)
Connection: keep-alive
Content-Type: application/json

{
  "cryptoKeyName": "projects/test-project-${uniqueId}/locations/us-central1/keyRings/test-ring-${uniqueId}/cryptoKeys/test-key-${uniqueId}",
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig"
}

500 Internal Server Error
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 500,
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "An internal error has occurred (84732e9a-699b-4a98-9d6b-083490cf592b)",
        "stackEntries": [
          "cloud/control2/shared/userfriendly/userfriendly.go:1165 +0x25 google3/cloud/control2/shared/userfriendly/userfriendly.DebugInfoWithMessage({0xc1027e5e50, 0x45})",
          "cloud/control2/shared/userfriendly/userfriendly.go:449 +0x6d google3/cloud/control2/shared/userfriendly/userfriendly.internalErrorWithStatus({0x55b905f76a88, 0xc0dec8f8f0}, {0x55b8f8de49f5, 0xd}, 0x0, {0xc1027e5e50, 0x45}, 0xc17cbffa40, 0x0)",
          "cloud/control2/shared/userfriendly/userfriendly.go:1042 +0x13d google3/cloud/control2/shared/userfriendly/userfriendly.FromExternalUserFriendlyStatus({0x55b905f76a88, 0xc0dec8f8f0}, {0x55b8f8de49f5, 0xd}, 0xc14783cec0, 0x0, 0x0)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:192 +0x614 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.callBackendMethod({0x55b9050c0980?}, {0x55b905f76a88, 0xc0dec8f8f0}, {0xc14adca880, 0xb}, 0x65fd9d83e8, {0x55b905f66e28, 0xc152dd4c80}, {0x55b905e1a9f8, 0xc144070fc0}, ...)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:56 +0x78 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.CallPreprocess({0xc0bb9d85f0?}, {0x55b905f76a88, 0xc0dec8f8f0}, 0x0, {0xc14adca880?, 0xc006740780?}, 0xc152dd4b40?, 0x55b905e21960?, {0x55b905e1a9f8, 0xc144070fc0}, ...)",
          "cloud/control2/frontend/handler/mutate.go:508 +0x2fe5 google3/cloud/control2/frontend/handler/handler.Handler.handleResourceMutation({{{0x55b905f808f0, 0xc00b6c5d40}, {0x0, 0x0}}, {{0xc00b644e90, 0x1, 0x1}, 0xc00a6dd410, 0xc00b644e80, {0x55b905f92d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:375 +0xbbb google3/cloud/control2/frontend/handler/handler.Handler.start({{{0x55b905f808f0, 0xc00b6c5d40}, {0x0, 0x0}}, {{0xc00b644e90, 0x1, 0x1}, 0xc00a6dd410, 0xc00b644e80, {0x55b905f92d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:276 +0x66 google3/cloud/control2/frontend/handler/handler.init.func17({_, _}, {{{0x55b905f808f0, 0xc00b6c5d40}, {0x0, 0x0}}, {{0xc00b644e90, 0x1, 0x1}, 0xc00a6dd410, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:271 +0x173 google3/cloud/control2/frontend/handler/handler.Handler.HandleRequest({{{0x55b905f808f0, 0xc00b6c5d40}, {0x0, 0x0}}, {{0xc00b644e90, 0x1, 0x1}, 0xc00a6dd410, 0xc00b644e80, {0x55b905f92d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/server/request_handler.go:111 +0x55c google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequestWithFullMethodName(0xc00a5beea0, {0x55b905f76a88, 0xc0dec8f6e0}, 0xc162328c00, 0xc0fecccc60, 0xc13173c4b0, {0xc159416aa0?, 0x55b8fbcc73e7?})",
          "cloud/control2/frontend/server/request_handler.go:84 +0x536 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequest(0xc00a5beea0, {0x55b905f76a88, 0xc0dec8f6e0}, 0xc0fecccc60, 0xc13173c4b0)",
          "cloud/control2/frontend/server/request_handler.go:53 +0x25 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handle(0xc0bb9d9308?, {0x55b905f76a88, 0xc0dec8f6e0}, 0x55b903c140c0?, 0xc0b1c21901?)",
          "cloud/control2/shared/genericrpc/service.go:172 +0x3e8 google3/cloud/control2/shared/genericrpc/genericrpc.(*Dispatcher).DefaultMethodHandler(0xc0073b5380, {0x55b905f76a88, 0xc0dec8f6e0}, 0xc0fecccc60)",
          "net/rpc/go/stream.go:1167 +0x43 google3/net/rpc/go/rpc.runStreamHandler({0x55b905f76a88?, 0xc0dec8f6e0?}, 0xc0fecccc60?, {0x0?, 0x0?}, {0x55b905f8c120, 0xc152dd49b0})",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x55b905f76a88?, 0xc148378ed0?}, 0xc0bb9d98d0)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc083474240, {0x55b905f77098, 0xc0be736c60}, 0xc162450b80)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "failed to extract key project ID from key name, error: generic::not_found: Resource projects/test-project-${uniqueId} could not be found.",
        "stackEntries": [
          "cloud/saas_accelerator/public/apierrors.go:722 +0x25 google3/cloud/saas_accelerator/public/apierrors.debugInfoWithMessage({0xc0108f4870, 0x8e})",
          "cloud/saas_accelerator/public/apierrors.go:600 +0x197 google3/cloud/saas_accelerator/public/apierrors.Internal({0x5632207b6b90, 0xc0145832c0}, {0x5632207264e8, 0xc00251b580}, {0x56321785ebda, 0x2e}, {0x0, 0x0, 0x0})",
          "cloud/eventflow/controlplane/clh/v1/handler_util.go:71 +0x105 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).CheckCmekC4OrgPolicy(0xc012421380, {0x5632207b6b90, 0xc0145832c0}, {0xc01ae76bc0, 0xc}, {0xc0041a0900?, 0xc012bac388?})",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:245 +0x205 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).prepareUpdateGoogleChannelConfigSingleton(0xc012421380, {0x5632207b6b90, 0xc0145832c0}, 0xc01eb06380, 0xc01eb06c80)",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:225 +0x2f google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).PrepareUpdateGoogleChannelConfigSingleton(0xc014f96a00?, {0x5632207b6b90, 0xc0145832c0}, 0xc01eb06380, 0xc012bac460?)",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x5632207b6b90?, 0xc014583110?}, 0xc012bad588)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc01c0c7d40, {0x5632207b7148, 0xc00c8f45a0}, 0xc01af8fa00)",
          "production/fireaxe/go/filters/rpcserverinterceptor.go:62 +0x2f0 google3/production/fireaxe/go/filters/rpcserverinterceptor.(*Interceptor).MakeHook-fm.(*Interceptor).MakeHook.func2({0x5632207b7148, 0xc00c8f45a0}, 0xc01af8fa00)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.ResourceInfo]:{resource_name:\"projects/test-project-${uniqueId}\"}"
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.RequestInfo]:{request_id:\"3b4f56af37de2817\"}"
      }
    ],
    "message": "An internal error has occurred (5f52a2b7-a5f6-47cf-9f39-3990a3113339)",
    "status": "INTERNAL"
  }
}

---

PATCH https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json&updateMask=cryptoKeyName
Accept: application/json
Authorization: (removed)
Connection: keep-alive
Content-Type: application/json

{
  "cryptoKeyName": "projects/test-project-${uniqueId}/locations/us-central1/keyRings/test-ring-${uniqueId}/cryptoKeys/test-key-${uniqueId}",
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig"
}

500 Internal Server Error
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 500,
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "An internal error has occurred (2ef68539-e1a8-4d7a-bbb5-39937f509471)",
        "stackEntries": [
          "cloud/control2/shared/userfriendly/userfriendly.go:1165 +0x25 google3/cloud/control2/shared/userfriendly/userfriendly.DebugInfoWithMessage({0xc1a9286370, 0x45})",
          "cloud/control2/shared/userfriendly/userfriendly.go:449 +0x6d google3/cloud/control2/shared/userfriendly/userfriendly.internalErrorWithStatus({0x562683776a88, 0xc1354cf290}, {0x5626765e49f5, 0xd}, 0x0, {0xc1a9286370, 0x45}, 0xc118224ea0, 0x0)",
          "cloud/control2/shared/userfriendly/userfriendly.go:1042 +0x13d google3/cloud/control2/shared/userfriendly/userfriendly.FromExternalUserFriendlyStatus({0x562683776a88, 0xc1354cf290}, {0x5626765e49f5, 0xd}, 0xc139f0d600, 0x0, 0x0)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:192 +0x614 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.callBackendMethod({0x5626828c0980?}, {0x562683776a88, 0xc1354cf290}, {0xc1fd2253e0, 0xb}, 0x65fd9d83e8, {0x562683766e28, 0xc173ff0230}, {0x56268361a9f8, 0xc110a33980}, ...)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:56 +0x78 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.CallPreprocess({0xc0af1c85f0?}, {0x562683776a88, 0xc1354cf290}, 0x0, {0xc1fd2253e0?, 0xc0060ada00?}, 0xc173ff0140?, 0x562683621960?, {0x56268361a9f8, 0xc110a33980}, ...)",
          "cloud/control2/frontend/handler/mutate.go:508 +0x2fe5 google3/cloud/control2/frontend/handler/handler.Handler.handleResourceMutation({{{0x5626837808f0, 0xc0053901c0}, {0x0, 0x0}}, {{0xc00c368060, 0x1, 0x1}, 0xc00b1495d8, 0xc00c368050, {0x562683792d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:375 +0xbbb google3/cloud/control2/frontend/handler/handler.Handler.start({{{0x5626837808f0, 0xc0053901c0}, {0x0, 0x0}}, {{0xc00c368060, 0x1, 0x1}, 0xc00b1495d8, 0xc00c368050, {0x562683792d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:276 +0x66 google3/cloud/control2/frontend/handler/handler.init.func17({_, _}, {{{0x5626837808f0, 0xc0053901c0}, {0x0, 0x0}}, {{0xc00c368060, 0x1, 0x1}, 0xc00b1495d8, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:271 +0x173 google3/cloud/control2/frontend/handler/handler.Handler.HandleRequest({{{0x5626837808f0, 0xc0053901c0}, {0x0, 0x0}}, {{0xc00c368060, 0x1, 0x1}, 0xc00b1495d8, 0xc00c368050, {0x562683792d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/server/request_handler.go:111 +0x55c google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequestWithFullMethodName(0xc00c6526c0, {0x562683776a88, 0xc1354ceae0}, 0xc15075b640, 0xc0b9c52e88, 0xc2076d7e30, {0xc1a92ff130?, 0x5626794c73e7?})",
          "cloud/control2/frontend/server/request_handler.go:84 +0x536 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequest(0xc00c6526c0, {0x562683776a88, 0xc1354ceae0}, 0xc0b9c52e88, 0xc2076d7e30)",
          "cloud/control2/frontend/server/request_handler.go:53 +0x25 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handle(0xc0af1c9308?, {0x562683776a88, 0xc1354ceae0}, 0x5626814140c0?, 0xc0bd200001?)",
          "cloud/control2/shared/genericrpc/service.go:172 +0x3e8 google3/cloud/control2/shared/genericrpc/genericrpc.(*Dispatcher).DefaultMethodHandler(0xc009efecf0, {0x562683776a88, 0xc1354ceae0}, 0xc0b9c52e88)",
          "net/rpc/go/stream.go:1167 +0x43 google3/net/rpc/go/rpc.runStreamHandler({0x562683776a88?, 0xc1354ceae0?}, 0xc0b9c52e88?, {0x0?, 0x0?}, {0x56268378c120, 0xc173ff00a0})",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x562683776a88?, 0xc1b61ccb10?}, 0xc0af1c98d0)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc08a56f1e0, {0x562683777098, 0xc0b1829b00}, 0xc0dc6b9e00)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "failed to extract key project ID from key name, error: generic::not_found: Resource projects/test-project-${uniqueId} could not be found.",
        "stackEntries": [
          "cloud/saas_accelerator/public/apierrors.go:722 +0x25 google3/cloud/saas_accelerator/public/apierrors.debugInfoWithMessage({0xc0184c4000, 0x8e})",
          "cloud/saas_accelerator/public/apierrors.go:600 +0x197 google3/cloud/saas_accelerator/public/apierrors.Internal({0x555ae7db6b90, 0xc00e05e1e0}, {0x555ae7d264e8, 0xc0014ba2c0}, {0x555adee5ebda, 0x2e}, {0x0, 0x0, 0x0})",
          "cloud/eventflow/controlplane/clh/v1/handler_util.go:71 +0x105 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).CheckCmekC4OrgPolicy(0xc00dee2270, {0x555ae7db6b90, 0xc00e05e1e0}, {0xc012f8e840, 0xc}, {0xc027e12480?, 0xc017904388?})",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:245 +0x205 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).prepareUpdateGoogleChannelConfigSingleton(0xc00dee2270, {0x555ae7db6b90, 0xc00e05e1e0}, 0xc01f5d98c0, 0xc0016c61c0)",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:225 +0x2f google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).PrepareUpdateGoogleChannelConfigSingleton(0xc01b76d300?, {0x555ae7db6b90, 0xc00e05e1e0}, 0xc01f5d98c0, 0xc017904460?)",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x555ae7db6b90?, 0xc00e05e060?}, 0xc017905588)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc004668f20, {0x555ae7db7148, 0xc00fd18000}, 0xc02710d800)",
          "production/fireaxe/go/filters/rpcserverinterceptor.go:62 +0x2f0 google3/production/fireaxe/go/filters/rpcserverinterceptor.(*Interceptor).MakeHook-fm.(*Interceptor).MakeHook.func2({0x555ae7db7148, 0xc00fd18000}, 0xc02710d800)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.ResourceInfo]:{resource_name:\"projects/test-project-${uniqueId}\"}"
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.RequestInfo]:{request_id:\"ad0f745dd3e5d461\"}"
      }
    ],
    "message": "An internal error has occurred (9445d6e5-ee1d-4b72-b884-6860d69b6317)",
    "status": "INTERNAL"
  }
}

---

PATCH https://eventarc.googleapis.com/v1/projects/${projectId}/locations/us-central1/googleChannelConfig?alt=json&updateMask=cryptoKeyName
Accept: application/json
Authorization: (removed)
Connection: keep-alive
Content-Type: application/json

{
  "cryptoKeyName": "projects/test-project-${uniqueId}/locations/us-central1/keyRings/test-ring-${uniqueId}/cryptoKeys/test-key-${uniqueId}",
  "name": "projects/${projectId}/locations/us-central1/googleChannelConfig"
}

500 Internal Server Error
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 500,
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "An internal error has occurred (9ad73beb-b133-4fa8-a51e-987f907ffa61)",
        "stackEntries": [
          "cloud/control2/shared/userfriendly/userfriendly.go:1165 +0x25 google3/cloud/control2/shared/userfriendly/userfriendly.DebugInfoWithMessage({0xc164720a50, 0x45})",
          "cloud/control2/shared/userfriendly/userfriendly.go:449 +0x6d google3/cloud/control2/shared/userfriendly/userfriendly.internalErrorWithStatus({0x556cc0176a88, 0xc162f13020}, {0x556cb2fe49f5, 0xd}, 0x0, {0xc164720a50, 0x45}, 0xc18e5b0840, 0x0)",
          "cloud/control2/shared/userfriendly/userfriendly.go:1042 +0x13d google3/cloud/control2/shared/userfriendly/userfriendly.FromExternalUserFriendlyStatus({0x556cc0176a88, 0xc162f13020}, {0x556cb2fe49f5, 0xd}, 0xc107dec3c0, 0x0, 0x0)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:192 +0x614 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.callBackendMethod({0x556cbf2c0980?}, {0x556cc0176a88, 0xc162f13020}, {0xc215613000, 0xb}, 0x65fd9d83e8, {0x556cc0166e28, 0xc1836a8cd0}, {0x556cc001a9f8, 0xc14b9ac440}, ...)",
          "cloud/control2/frontend/clhprotocol/clh_client.go:56 +0x78 google3/cloud/control2/frontend/clhprotocol/clhclient.CLHClient.CallPreprocess({0xc1222145f0?}, {0x556cc0176a88, 0xc162f13020}, 0x0, {0xc215613000?, 0xc005d27f00?}, 0xc1836a8be0?, 0x556cc0021960?, {0x556cc001a9f8, 0xc14b9ac440}, ...)",
          "cloud/control2/frontend/handler/mutate.go:508 +0x2fe5 google3/cloud/control2/frontend/handler/handler.Handler.handleResourceMutation({{{0x556cc01808f0, 0xc0064e1c40}, {0x0, 0x0}}, {{0xc0096db5b0, 0x1, 0x1}, 0xc0093db1b8, 0xc0096db5a0, {0x556cc0192d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:375 +0xbbb google3/cloud/control2/frontend/handler/handler.Handler.start({{{0x556cc01808f0, 0xc0064e1c40}, {0x0, 0x0}}, {{0xc0096db5b0, 0x1, 0x1}, 0xc0093db1b8, 0xc0096db5a0, {0x556cc0192d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:276 +0x66 google3/cloud/control2/frontend/handler/handler.init.func17({_, _}, {{{0x556cc01808f0, 0xc0064e1c40}, {0x0, 0x0}}, {{0xc0096db5b0, 0x1, 0x1}, 0xc0093db1b8, ...}, ...}, ...)",
          "cloud/control2/frontend/handler/handler.go:271 +0x173 google3/cloud/control2/frontend/handler/handler.Handler.HandleRequest({{{0x556cc01808f0, 0xc0064e1c40}, {0x0, 0x0}}, {{0xc0096db5b0, 0x1, 0x1}, 0xc0093db1b8, 0xc0096db5a0, {0x556cc0192d60, ...}, ...}, ...}, ...)",
          "cloud/control2/frontend/server/request_handler.go:111 +0x55c google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequestWithFullMethodName(0xc00d1db320, {0x556cc0176a88, 0xc162f12e10}, 0xc165029580, 0xc0e5f0e168, 0xc11ae6f170, {0xc1615032c0?, 0x64b5ec7300?})",
          "cloud/control2/frontend/server/request_handler.go:84 +0x536 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handleRequest(0xc00d1db320, {0x556cc0176a88, 0xc162f12e10}, 0xc0e5f0e168, 0xc11ae6f170)",
          "cloud/control2/frontend/server/request_handler.go:53 +0x25 google3/cloud/control2/frontend/server/requesthandler.(*Handler).handle(0xc122215308?, {0x556cc0176a88, 0xc162f12e10}, 0x556cbde140c0?, 0xc099a16301?)",
          "cloud/control2/shared/genericrpc/service.go:172 +0x3e8 google3/cloud/control2/shared/genericrpc/genericrpc.(*Dispatcher).DefaultMethodHandler(0xc008d28690, {0x556cc0176a88, 0xc162f12e10}, 0xc0e5f0e168)",
          "net/rpc/go/stream.go:1167 +0x43 google3/net/rpc/go/rpc.runStreamHandler({0x556cc0176a88?, 0xc162f12e10?}, 0xc0e5f0e168?, {0x0?, 0x0?}, {0x556cc018c120, 0xc1836a8b40})",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x556cc0176a88?, 0xc2c5a41080?}, 0xc1222158d0)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc0831c0060, {0x556cc0177098, 0xc0e7c78f00}, 0xc165006380)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "failed to extract key project ID from key name, error: generic::not_found: Resource projects/test-project-${uniqueId} could not be found.",
        "stackEntries": [
          "cloud/saas_accelerator/public/apierrors.go:722 +0x25 google3/cloud/saas_accelerator/public/apierrors.debugInfoWithMessage({0xc00df60e10, 0x8e})",
          "cloud/saas_accelerator/public/apierrors.go:600 +0x197 google3/cloud/saas_accelerator/public/apierrors.Internal({0x561ce31b6b90, 0xc006d8a630}, {0x561ce31264e8, 0xc0170d2180}, {0x561cda25ebda, 0x2e}, {0x0, 0x0, 0x0})",
          "cloud/eventflow/controlplane/clh/v1/handler_util.go:71 +0x105 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).CheckCmekC4OrgPolicy(0xc01cfa7e10, {0x561ce31b6b90, 0xc006d8a630}, {0xc01c9c2210, 0xc}, {0xc00df60cf0?, 0xc00f7e4388?})",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:245 +0x205 google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).prepareUpdateGoogleChannelConfigSingleton(0xc01cfa7e10, {0x561ce31b6b90, 0xc006d8a630}, 0xc01d26e580, 0xc01d26ed40)",
          "cloud/eventflow/controlplane/clh/v1/google_channel_config_handler.go:225 +0x2f google3/cloud/eventflow/controlplane/clh/v1/handler.(*Handler).PrepareUpdateGoogleChannelConfigSingleton(0xc025c7b080?, {0x561ce31b6b90, 0xc006d8a630}, 0xc01d26e580, 0xc00f7e4460?)",
          "net/goa/rpc/rpchandler.go:100 +0x4d7 google3/net/goa/rpc/rpchandler.ExecHandlerSubset({0x561ce31b6b90?, 0xc019309f20?}, 0xc00f7e5588)",
          "net/goa/rpc/rpchandler.go:327 +0x9f5 google3/net/goa/rpc/rpchandler.(*closedRegistry).hook(0xc017142060, {0x561ce31b7148, 0xc022da37a0}, 0xc01f7aaf80)",
          "production/fireaxe/go/filters/rpcserverinterceptor.go:62 +0x2f0 google3/production/fireaxe/go/filters/rpcserverinterceptor.(*Interceptor).MakeHook-fm.(*Interceptor).MakeHook.func2({0x561ce31b7148, 0xc022da37a0}, 0xc01f7aaf80)"
        ]
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.ResourceInfo]:{resource_name:\"projects/test-project-${uniqueId}\"}"
      },
      {
        "@type": "type.googleapis.com/google.rpc.DebugInfo",
        "detail": "[type.googleapis.com/google.rpc.RequestInfo]:{request_id:\"c4ca0e6e7cc1fafa\"}"
      }
    ],
    "message": "An internal error has occurred (95d45259-8cc7-4ca6-9853-d0e27ddbaca3)",
    "status": "INTERNAL"
  }
}
